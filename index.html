<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<title>HARMONY ‚Äî duel but cute</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;600;700&family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap" rel="stylesheet">
<meta name="theme-color" content="#101214"/>
<style>
  :root{
    /* palette: modern, punchy but elegant */
    --bg:#0e1117; --ink:#eaf1ff; --muted:#9fb0c8; --line:#1e2635;
    --g1:#7be7c3; --g2:#9db3ff; --g3:#ffc3a1; --g4:#b8a7ff;
    --good:#76f2ba; --warn:#ffd48f; --bad:#ff9aa7;
    --glass: rgba(255,255,255,.06);
    --r:18px; --shadow:0 18px 40px rgba(0,0,0,.45);
    --bar:66px; --tap:52px;
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink); background:radial-gradient(1400px 900px at -10% -20%, #182039 0%, transparent 60%), radial-gradient(1200px 800px at 110% -10%, #10271f 0%, transparent 60%), #0e1117;
    font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background-attachment: fixed;
  }

  /* animated blobs (hero) */
  .blobs::before,.blobs::after{
    content:""; position:fixed; inset:auto; width:520px; height:520px; border-radius:50%;
    filter: blur(60px); z-index:-1; opacity:.55; animation: float 14s ease-in-out infinite;
  }
  .blobs::before{ right:-140px; top:-140px; background: radial-gradient(closest-side, #1f2b5e, transparent); }
  .blobs::after{ left:-160px; bottom:-160px; background: radial-gradient(closest-side, #1e3d2e, transparent); animation-delay: -6s; }
  @keyframes float{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-22px)} }

  /* top bar */
  header{
    position:sticky; top:0; z-index:15; padding:12px 14px; backdrop-filter: blur(8px) saturate(1.2);
    background:linear-gradient(180deg, rgba(10,13,20,.85), rgba(10,13,20,.35)); border-bottom:1px solid var(--line);
    display:flex; align-items:center; justify-content:space-between; gap:12px;
  }
  .brand{display:flex; align-items:center; gap:10px}
  .sig{
    width:36px;height:36px;border-radius:12px;
    background: conic-gradient(from 0deg, var(--g1), var(--g2), var(--g3), var(--g1));
    box-shadow:0 0 0 1px #24304a inset, 0 8px 22px rgba(0,0,0,.4);
  }
  .h1{font-family:Fraunces, serif; font-weight:700; letter-spacing:.2px; margin:0; font-size:18px}
  .sub{color:var(--muted); font-size:12px}
  .btn{
    appearance:none; border:1px solid var(--line); background:#0d1220; color:#eaf1ff; border-radius:12px; padding:10px 12px; font-weight:700; cursor:pointer;
  }
  .btn.ghost{background:transparent}
  .btn.primary{background:linear-gradient(135deg, #1b283f, #1f2a54);}

  /* bottom nav */
  nav{
    position:fixed; bottom:0; inset-inline:0; height:var(--bar); display:flex; justify-content:space-around; align-items:center;
    background:rgba(10,13,20,.8); border-top:1px solid var(--line); backdrop-filter: blur(8px); z-index:20;
  }
  .tab{flex:1; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:3px; color:#aabdff; font-size:11px; font-weight:700}
  .tab.active{color:#fff}
  .ico{font-size:19px; line-height:1}

  /* layout */
  .wrap{max-width:940px; margin:0 auto; padding:16px 14px calc(var(--bar) + 20px)}
  .grid{display:grid; gap:14px}
  @media(min-width:900px){ .grid.cols2{grid-template-columns:1fr 1fr} }

  /* glass cards */
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid var(--line); border-radius:var(--r); box-shadow:var(--shadow); padding:14px;
  }
  .title{display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px}
  .pill{display:inline-flex; align-items:center; gap:6px; border:1px solid #2b3650; background:#0d1324; color:#d7e1ff; padding:6px 10px; border-radius:999px; font-size:12px}

  input,textarea,select{
    width:100%; background:#0c1426; color:#eaf1ff; border:1px solid var(--line); border-radius:12px; padding:12px; font-size:16px; outline:none;
  }
  textarea{min-height:90px; resize:vertical}
  .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
  .muted{color:var(--muted)}

  /* Harmony Orb */
  .orb{
    position:relative; width:220px; height:220px; border-radius:50%;
    background: radial-gradient(60% 60% at 50% 40%, rgba(255,255,255,.12), rgba(255,255,255,.02));
    border:1px solid #223050; margin:0 auto; display:grid; place-items:center;
    box-shadow: inset 0 0 40px rgba(124,202,255,.05), 0 20px 60px rgba(0,0,0,.35);
  }
  .orb::after{
    content:""; position:absolute; inset:8px; border-radius:50%;
    background: conic-gradient(from 270deg, var(--g1) 0 var(--p), rgba(255,255,255,.05) var(--p) 100%);
    mask: radial-gradient(closest-side, transparent 74%, black 75%);
    transition: .4s ease all;
  }
  .orb-label{
    text-align:center;
  }
  .orb .big{font-family:Fraunces,serif; font-size:30px; letter-spacing:.3px}
  .orb .small{color:#b6c5e6; font-size:12px}

  /* mini modes */
  .modes{display:grid; gap:10px}
  .mode{
    display:flex; align-items:center; gap:12px; padding:12px; border-radius:14px; border:1px solid var(--line); background:rgba(255,255,255,.03)
  }
  .mode .icon{font-size:22px}
  .mode strong{letter-spacing:.2px}

  /* duel */
  .duel{display:grid; gap:10px}
  .half{display:grid; gap:8px}
  .timer{font-variant-numeric: tabular-nums; font-weight:800; letter-spacing:.6px; padding:8px 10px; border-radius:10px; border:1px solid var(--line); width:fit-content}
  .chips{display:flex; gap:8px; flex-wrap:wrap}
  .chip{border:1px solid #2b3855; background:#101a30; color:#d7e5ff; padding:6px 10px; border-radius:999px; font-size:12px}

  /* plan quest checklist */
  .check{display:flex; align-items:center; gap:10px; padding:10px; border:1px solid var(--line); border-radius:12px; background:#0d1425}
  .tick{width:24px; height:24px; border-radius:50%; border:2px solid #3a4a71; display:grid; place-items:center; cursor:pointer}
  .done .tick{background:linear-gradient(135deg, var(--g1), var(--g2)); border-color:transparent; color:#08220f}
  .done{opacity:.9}

  /* memory vine */
  .vine{
    position:relative; height:380px; overflow:hidden; border-radius:16px; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
    border:1px solid var(--line);
  }
  .vine svg{position:absolute; inset:0}
  .leaf{
    position:absolute; width:72px; height:72px; border-radius:50%;
    box-shadow:0 6px 20px rgba(0,0,0,.35); overflow:hidden; border:2px solid #2a374f; background:#0b1324; display:grid; place-items:center
  }
  .leaf img{width:100%; height:100%; object-fit:cover}
  .leaf .cap{position:absolute; bottom:-2px; left:0; right:0; text-align:center; font-size:11px; color:#cfe2ff; background:linear-gradient(180deg, transparent, rgba(0,0,0,.6))}
  .empty{color:#9ab0d6; text-align:center; padding:12px}

  /* floating + */
  .fab{
    position:fixed; right:16px; bottom:calc(var(--bar) + 16px); width:58px;height:58px;border-radius:50%;
    border:0; cursor:pointer; color:#04101a; font-size:28px; font-weight:900;
    background:conic-gradient(from 0deg, var(--g1), var(--g2), var(--g4));
    box-shadow: 0 16px 40px rgba(0,0,0,.5);
  }

  /* sheet */
  .backdrop{position:fixed; inset:0; display:none; background:rgba(6,8,12,.65); backdrop-filter: blur(8px); align-items:flex-end; z-index:50}
  .sheet{width:100%; background:#0c1220; border-top:1px solid var(--line); border-top-left-radius:18px; border-top-right-radius:18px; padding:14px 12px 18px}
  .show{display:flex}

  /* micro anim */
  @keyframes pop{0%{transform:scale(.9)}60%{transform:scale(1.05)}100%{transform:scale(1)}}
  .pop{animation:pop .25s ease}
</style>
</head>
<body class="blobs">
  <header>
    <div class="brand">
      <div class="sig" aria-hidden="true"></div>
      <div>
        <p class="h1">HARMONY</p>
        <div class="sub">duel ‚Ä¢ listen ‚Ä¢ plan ‚Äî together</div>
      </div>
    </div>
    <button class="btn ghost" id="styleBtn">Style</button>
  </header>

  <main class="wrap">
    <!-- Dashboard -->
    <section id="home">
      <div class="grid cols2">
        <div class="card">
          <div class="title"><strong>Harmony</strong><span class="pill" id="xpPill">0 / 100</span></div>
          <div class="orb" id="orb" style="--p:0%">
            <div class="orb-label">
              <div class="big" id="orbBig">0%</div>
              <div class="small">fair rounds this week</div>
            </div>
          </div>
          <div class="modes" style="margin-top:12px">
            <div class="mode"><div class="icon">üéß</div><div style="flex:1"><strong>Listen Duel</strong><div class="sub">90s each ‚Ä¢ 3 words the listener heard</div></div><button class="btn" data-go="listen">Play</button></div>
            <div class="mode"><div class="icon">‚öñÔ∏è</div><div style="flex:1"><strong>Debate Lab</strong><div class="sub">3 lines each ‚Üí tiny neutral plan</div></div><button class="btn" data-go="debate">Play</button></div>
            <div class="mode"><div class="icon">üó∫Ô∏è</div><div style="flex:1"><strong>Plan Quest</strong><div class="sub">micro-plan for the weekend (dog-friendly!)</div></div><button class="btn" data-go="plan">Play</button></div>
          </div>
        </div>

        <div class="card">
          <div class="title"><strong>Today</strong><span class="pill">keep it tiny</span></div>
          <div class="row"><input id="appreciation" placeholder="üíö One thing I appreciated‚Ä¶"/></div>
          <div class="row"><input id="wish" placeholder="üß∏ I feel‚Ä¶ when‚Ä¶ I‚Äôd love if‚Ä¶"/></div>
          <div class="row"><button class="btn primary" id="addToday">Add to feed</button></div>
          <div id="feed" style="margin-top:10px"></div>
        </div>
      </div>

      <div class="card">
        <div class="title"><strong>Memory Vine</strong><span class="pill">weekend/month highlights</span></div>
        <div class="vine" id="vine">
          <svg viewBox="0 0 800 380" preserveAspectRatio="none">
            <path id="stem" d="M40,360 C160,300 260,300 360,340 C460,380 560,350 660,290 C760,230 760,150 670,110 C580,70 470,90 380,130 C290,170 190,190 120,160 C60,135 45,95 80,60" stroke="url(#sg)" stroke-width="6" fill="none" stroke-linecap="round" stroke-opacity=".55"/>
            <defs><linearGradient id="sg" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#7be7c3"/><stop offset="100%" stop-color="#9db3ff"/></linearGradient></defs>
          </svg>
          <div id="leaves"></div>
        </div>
        <div class="row" style="margin-top:10px">
          <input id="memUrl" placeholder="Image URL"/>
          <input id="memCap" placeholder="Caption (e.g., Dog park + new camera)"/>
          <button class="btn" id="addLeaf">Add leaf</button>
        </div>
      </div>
    </section>

    <!-- Listen Duel -->
    <section id="listen" style="display:none">
      <div class="card">
        <div class="title"><strong>üéß Listen Duel</strong><span class="pill">90s each ‚Ä¢ then 3 words</span></div>
        <div class="duel">
          <div class="half">
            <div class="sub">You speak</div>
            <textarea id="l_me" placeholder="Say your side (any language)"></textarea>
            <div class="row"><span class="timer" id="l_timer">01:30</span><button class="btn" id="l_start">Start</button></div>
          </div>
          <div class="half">
            <div class="sub">Partner summarizes (3 words)</div>
            <div class="chips" id="l_words"></div>
            <div class="row"><input id="l_word" placeholder="type a word‚Ä¶"/><button class="btn" id="l_add">Add</button></div>
          </div>
          <div class="row"><button class="btn primary" id="l_finish">Finish round</button></div>
        </div>
      </div>
    </section>

    <!-- Debate Lab -->
    <section id="debate" style="display:none">
      <div class="card">
        <div class="title"><strong>‚öñÔ∏è Debate Lab</strong><span class="pill">3 lines each ‚Üí tiny plan</span></div>
        <div class="row"><input id="d_title" placeholder="Topic (e.g., chores, timing, tone)"/></div>
        <div class="row"><textarea id="d_me" maxlength="180" placeholder="My view (‚â§ 3 lines)"></textarea></div>
        <div class="row"><textarea id="d_pt" maxlength="180" placeholder="Partner‚Äôs view (‚â§ 3 lines)"></textarea></div>
        <div class="row">
          <select id="d_lang">
            <option value="auto">Referee in partner‚Äôs language (auto UK/PT/EN)</option>
            <option value="uk">Ukrainian</option>
            <option value="pt">Portuguese</option>
            <option value="en">English</option>
          </select>
          <button class="btn" id="d_ref">Referee</button>
        </div>
        <div id="d_card" class="card" style="display:none; margin-top:10px">
          <div class="title"><strong>Referee</strong><span class="pill">neutral & short</span></div>
          <div id="d_out"></div>
          <div class="sub" id="d_meta" style="margin-top:6px"></div>
          <div class="row" style="margin-top:10px"><button class="btn primary" id="d_post">Post to feed</button></div>
        </div>
      </div>
    </section>

    <!-- Plan Quest -->
    <section id="plan" style="display:none">
      <div class="card">
        <div class="title"><strong>üó∫Ô∏è Plan Quest</strong><span class="pill">micro-plan, dog-friendly</span></div>
        <div class="row"><input id="p_theme" placeholder="Theme (e.g., photo walk, coffee hunt, river sunset)" /></div>
        <div id="p_list" class="grid"></div>
        <div class="row" style="margin-top:10px"><button class="btn primary" id="p_make">Generate steps</button></div>
      </div>
    </section>
  </main>

  <!-- bottom nav -->
  <nav>
    <button class="tab active" data-scr="home"><div class="ico">üè†</div>Home</button>
    <button class="tab" data-scr="listen"><div class="ico">üéß</div>Listen</button>
    <button class="tab" data-scr="debate"><div class="ico">‚öñÔ∏è</div>Debate</button>
    <button class="tab" data-scr="plan"><div class="ico">üó∫Ô∏è</div>Plan</button>
  </nav>

  <!-- floating + (quick add to feed) -->
  <button class="fab" id="fab" title="Add">Ôºã</button>

  <!-- sheet -->
  <div class="backdrop" id="sheet">
    <div class="sheet">
      <div class="row" style="justify-content:space-between"><strong>Add to feed</strong><button class="btn" id="closeSheet">Close</button></div>
      <div class="row" style="margin-top:10px">
        <button class="btn" id="quickApp">üíö Appreciation</button>
        <button class="btn" id="quickWish">üß∏ Wish</button>
        <button class="btn" id="quickNote">üìù Note</button>
      </div>
      <div id="sheetForm" style="margin-top:10px"></div>
      <div class="row" style="margin-top:10px"><button class="btn primary" id="sheetSave" style="display:none">Save</button></div>
    </div>
  </div>

<script>
/* === state === */
const state = {
  harmony: 0, // 0..100
  feed: [],
  leaves: []
};

const $ = id => document.getElementById(id);

/* === nav === */
document.querySelectorAll('nav .tab').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('nav .tab').forEach(x=>x.classList.remove('active')); btn.classList.add('active');
    const scr = btn.dataset.scr;
    ['home','listen','debate','plan'].forEach(k=> document.getElementById(k).style.display = (k===scr)?'block':'none');
    scrollTo(0,0);
  });
});
document.querySelectorAll('[data-go]').forEach(b=> b.onclick=()=> {
  const scr = b.dataset.go;
  document.querySelector(`nav .tab[data-scr="${scr}"]`).click();
});

/* === Harmony Orb === */
function setHarmony(v){
  state.harmony = Math.max(0, Math.min(100, v));
  const orb = $('orb');
  orb.style.setProperty('--p', state.harmony+'%');
  $('orbBig').textContent = Math.round(state.harmony)+'%';
  $('xpPill').textContent = `${Math.round(state.harmony)} / 100`;
}
setHarmony(0);

/* === feed === */
function addFeed(kind, who, text){
  state.feed.unshift({kind, who, text, when: new Date()});
  renderFeed();
  // bump harmony a little for positive actions
  setHarmony(state.harmony + (kind==='wish'?2: kind==='app'?1:3));
}
function renderFeed(){
  const box = $('feed'); box.innerHTML='';
  if(!state.feed.length){ box.innerHTML='<div class="empty">Nothing yet.</div>'; return; }
  state.feed.forEach(it=>{
    const row = document.createElement('div'); row.className='row';
    const dot = document.createElement('div'); dot.style.width='10px'; dot.style.height='10px'; dot.style.borderRadius='50%';
    dot.style.background = it.kind==='app' ? 'var(--g1)' : it.kind==='wish' ? 'var(--g3)' : 'var(--g2)';
    const card = document.createElement('div'); card.className='card'; card.style.padding='10px'; card.style.flex='1';
    card.innerHTML = `<div>${it.text}</div><div class="sub" style="margin-top:4px">${new Intl.DateTimeFormat(undefined,{hour:'2-digit',minute:'2-digit'}).format(it.when)} ‚Ä¢ ${it.who}</div>`;
    row.appendChild(dot); row.appendChild(card); box.appendChild(row);
  });
}
$('addToday').onclick = ()=>{
  const a = $('appreciation').value.trim();
  const w = $('wish').value.trim();
  if(a){ addFeed('app','You',a); $('appreciation').value=''; }
  if(w){ addFeed('wish','You',w); $('wish').value=''; }
};

/* === Memory Vine === */
function placeLeaf(url, cap){
  const host = $('leaves');
  const path = document.getElementById('stem');
  const L = path.getTotalLength();
  const i = state.leaves.length;
  const t = Math.min(0.1 + i*0.08, .95);
  const p = path.getPointAtLength(L*t);
  const leaf = document.createElement('div');
  leaf.className='leaf pop';
  leaf.style.left = (p.x - 36) + 'px';
  leaf.style.top  = (p.y - 36) + 'px';
  leaf.innerHTML = url ? `<img src="${url}" alt=""><div class="cap">${cap||''}</div>` : `<div class="cap">${cap||''}</div>`;
  host.appendChild(leaf);
}
$('addLeaf').onclick = ()=>{
  const url = $('memUrl').value.trim(); const cap = $('memCap').value.trim();
  if(!url && !cap) return;
  state.leaves.push({url, cap});
  placeLeaf(url, cap);
  $('memUrl').value=''; $('memCap').value='';
  setHarmony(state.harmony + 2);
};

/* === Listen Duel === */
let lInt=null, lSec=90;
const setL = s => $('l_timer').textContent = new Date(s*1000).toISOString().substring(14,19);
setL(90);
$('l_start').onclick = ()=>{
  if(lInt){ clearInterval(lInt); lInt=null; }
  lSec=90; setL(lSec);
  lInt = setInterval(()=>{ lSec--; setL(lSec); if(lSec<=0){ clearInterval(lInt); lInt=null; }},1000);
};
$('l_add').onclick = ()=>{
  const w = $('l_word').value.trim();
  if(!w) return;
  const chip = document.createElement('span'); chip.className='chip'; chip.textContent = w;
  $('l_words').appendChild(chip); $('l_word').value='';
  if($('l_words').children.length>=3) $('l_add').disabled=true;
};
$('l_finish').onclick = ()=>{
  const words = [...$('l_words').children].map(x=>x.textContent);
  if(words.length<3){ alert('Add exactly 3 words you heard.'); return; }
  addFeed('note','Referee',`üéß Listener caught: ${words.join(' ‚Ä¢ ')}`);
  $('l_words').innerHTML=''; $('l_add').disabled=false; $('l_me').value='';
  setHarmony(state.harmony + 8);
};

/* === Debate Lab === */
function guessLang(t){
  if(/[\u0400-\u04FF]/.test(t)) return 'uk';
  const pt=[' que ',' n√£o ',' voc√™ ',' pra ',' de ',' √© ',' ao ',' √† ',' meu ',' minha ',' seu ',' sua ',' com '];
  const L=(' '+t.toLowerCase()+' '); return pt.some(w=>L.includes(w))?'pt':'en';
}
function referee(title, mine, partner, target){
  const T={
    en:(t,m,p)=>`Referee (${t}): You both care. You: ‚Äú${m.slice(0,90)}‚Ä¶‚Äù. Partner: ‚Äú${p.slice(0,90)}‚Ä¶‚Äù. Tiny next step: 48-hour test, then check in.`,
    pt:(t,m,p)=>`√Årbitro (${t}): Voc√™s se importam. Voc√™: ‚Äú${m.slice(0,90)}‚Ä¶‚Äù. Parceira(o): ‚Äú${p.slice(0,90)}‚Ä¶‚Äù. Passo pequeno: teste de 48h e revisar.`,
    uk:(t,m,p)=>`–†–µ—Ñ–µ—Ä—ñ (${t}): –í–∞–º –æ–±–æ–º –≤–∞–∂–ª–∏–≤–æ. –í–∏: ¬´${m.slice(0,90)}‚Ä¶¬ª. –ü–∞—Ä—Ç–Ω–µ—Ä(–∫–∞): ¬´${p.slice(0,90)}‚Ä¶¬ª. –ú–∞–ª–∏–π –∫—Ä–æ–∫: —Ç–µ—Å—Ç –Ω–∞ 48 –≥–æ–¥, –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞.`
  }; return (T[target]||T.en)(title,mine,partner);
}
$('d_ref').onclick = ()=>{
  const t=$('d_title').value.trim(), m=$('d_me').value.trim(), p=$('d_pt').value.trim();
  if(!t||!m||!p) return;
  const sel=$('d_lang').value;
  const to = sel!=='auto' ? sel : (guessLang(p)||'uk');
  const out = referee(t,m,p,to);
  $('d_out').textContent = out; $('d_meta').textContent = `‚Üí ${to.toUpperCase()} ‚Ä¢ neutral plan`;
  $('d_card').style.display='block';
};
$('d_post').onclick = ()=>{
  const txt = $('d_out').textContent.trim(); if(!txt) return;
  addFeed('note','Referee', txt);
  $('d_title').value=''; $('d_me').value=''; $('d_pt').value=''; $('d_card').style.display='none';
  setHarmony(state.harmony + 10);
};

/* === Plan Quest === */
const ideas = [
  (theme)=>[
    `Scout a ${theme||'photo walk'} route (10 min)`,
    `Pack dog treats + water`,
    `Pick 1 ‚Äúus‚Äù photo prompt`,
    `20-min walk ‚Ä¢ 6 photos max`,
    `Warm drink debrief: 3 nice moments`
  ],
  (theme)=>[
    `Find a ${theme||'coffee'} spot you‚Äôve never tried`,
    `Each brings 1 question`,
    `Phones face-down for 20min`,
    `Swap 1 appreciation`,
    `Take 1 candid dog pic`
  ]
];
function makePlan(){
  const theme = $('p_theme').value.trim();
  const arr = ideas[Math.floor(Math.random()*ideas.length)](theme);
  const list = $('p_list'); list.innerHTML='';
  arr.forEach(step=>{
    const row=document.createElement('div'); row.className='check';
    row.innerHTML = `<div class="tick"> </div><div style="flex:1">${step}</div>`;
    const tick = row.querySelector('.tick');
    tick.onclick = ()=>{ row.classList.toggle('done'); if(row.classList.contains('done')) setHarmony(state.harmony+3); };
    list.appendChild(row);
  });
}
$('p_make').onclick = makePlan;

/* === + sheet (quick add) === */
const sheet=$('sheet'), form=$('sheetForm'), save=$('sheetSave');
$('fab').onclick=()=>{ sheet.classList.add('show'); form.innerHTML=''; save.style.display='none'; };
$('closeSheet').onclick=()=> sheet.classList.remove('show');

$('quickApp').onclick=()=>{
  form.innerHTML = `<textarea id="qTxt" placeholder="üíö Appreciation‚Ä¶"></textarea>`; save.style.display='inline-block';
  save.onclick=()=>{ const t=$('qTxt').value.trim(); if(!t) return; addFeed('app','You',t); sheet.classList.remove('show'); };
};
$('quickWish').onclick=()=>{
  form.innerHTML = `<textarea id="qTxt" placeholder="üß∏ I feel‚Ä¶ when‚Ä¶ I‚Äôd love if‚Ä¶"></textarea>`; save.style.display='inline-block';
  save.onclick=()=>{ const t=$('qTxt').value.trim(); if(!t) return; addFeed('wish','You',t); sheet.classList.remove('show'); };
};
$('quickNote').onclick=()=>{
  form.innerHTML = `<textarea id="qTxt" placeholder="üìù Note / idea‚Ä¶"></textarea>`; save.style.display='inline-block';
  save.onclick=()=>{ const t=$('qTxt').value.trim(); if(!t) return; addFeed('note','You',t); sheet.classList.remove('show'); };
};

/* === style btn (future theme picker) === */
$('styleBtn').onclick = ()=> alert('Theme picker coming next. For now, enjoy the animated glass + orb vibe.');

/* === demo seed === */
addFeed('app','You','Loved your smile during breakfast.');
addFeed('wish','You','I feel rushed when we‚Äôre late; could we leave 10 min earlier?');
placeLeaf('https://images.unsplash.com/photo-1558944351-cbcf07c2a259?q=80&w=800&auto=format&fit=crop','Dog park + new camera');
makePlan();
</script>
</body>
</html>

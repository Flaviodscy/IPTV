<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>Us ‚Äî Journey (Playful)</title>
<meta name="theme-color" content="#ffffff" />
<style>
  :root{
    /* palette ‚Äî soft, playful */
    --bg:#f9fafc; --card:#ffffff; --ink:#141a2e; --muted:#7a849d; --line:#e8edf6;
    --mint:#72e4c1; --sky:#9fc2ff; --lilac:#c9b5ff; --coral:#ffb8a8; --lemon:#f9df7a;
    --green:#41d39a; --pink:#ff9bb0; --blue:#6aa7ff; --gold:#f7c84a;
    --r:18px; --shadow:0 10px 28px rgba(0,0,0,.08); --bar:64px; --fab:66px;
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink); background:
      radial-gradient(900px 600px at -10% -10%, #f2f6ff 0%, transparent 60%),
      radial-gradient(1000px 700px at 120% -20%, #f3fff7 0%, transparent 60%),
      var(--bg);
    font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
  }

  /* top bar */
  .top{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:space-between;gap:8px;
    padding:12px 14px;background:linear-gradient(180deg,#fff,#ffffffdd);border-bottom:1px solid var(--line);backdrop-filter:blur(6px)}
  .brand{display:flex;gap:10px;align-items:center}
  .logo{width:36px;height:36px;border-radius:12px;background:conic-gradient(from 0deg, var(--mint), var(--sky), var(--lilac), var(--coral), var(--mint))}
  h1{margin:0;font-size:18px}
  .muted{color:var(--muted);font-size:12px}
  .btn{appearance:none;border:1px solid var(--line);background:#fff;color:var(--ink);border-radius:999px;padding:10px 14px;font-weight:800}
  .btn.ghost{background:#fff}
  .chip{border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:12px;background:#fff}

  /* layout */
  .wrap{padding:12px 12px calc(var(--bar)+24px)}
  .card{background:var(--card);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);padding:12px;margin-bottom:12px}
  .title{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  input,select,textarea{width:100%;background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px;font-size:16px;outline:none}
  textarea{min-height:88px;resize:vertical}
  .empty{color:#8ea0bd;text-align:center;padding:16px}

  /* Journey path */
  .journey-wrap{position:relative; height:300px; overflow:hidden; border-radius:16px; background:linear-gradient(180deg,#ffffff,#fcfdff)}
  .journey-bg{position:absolute; inset:0; background:
      radial-gradient(60px 60px at 10% 20%, #fff6 0, transparent 60%),
      radial-gradient(80px 80px at 80% 10%, #fff6 0, transparent 60%),
      radial-gradient(80px 80px at 20% 90%, #fff6 0, transparent 60%);
    pointer-events:none}
  svg#line{position:absolute; inset:0}
  .node{
    position:absolute; width:54px; height:54px; border-radius:50%;
    background:#fff; border:2px solid var(--line); display:flex; align-items:center; justify-content:center;
    box-shadow:0 6px 14px rgba(0,0,0,.06);
    transition: transform .2s ease, border-color .2s ease;
  }
  .node.unlocked{border-color:#cfe7ff}
  .node .dot{width:14px;height:14px;border-radius:50%; background:#d0d7eb}
  .node.unlocked .dot{background:linear-gradient(135deg,var(--mint),var(--sky))}
  .node.current{transform:scale(1.06)}
  .node.done .dot{background:linear-gradient(135deg,var(--green),#a8ffd7)}
  .node .lvl{position:absolute; top:-22px; font-size:12px; color:#6a7696; font-weight:800}
  .node .badge{position:absolute; bottom:-22px; font-size:12px; color:#1b6f4a; font-weight:900}

  /* feed items */
  .item{display:flex;gap:10px;padding:12px;border-radius:14px;background:#fff;border:1px solid var(--line)}
  .dot{width:12px;height:12px;border-radius:50%}
  .type-app .dot{background:var(--green)}
  .type-wish .dot{background:var(--coral)}
  .type-sum .dot{background:var(--lilac)}
  .meta{color:#7b88a6;font-size:12px;margin-top:6px}
  .pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--line);font-size:12px;background:#fff}

  /* micro quests */
  .quest{display:flex;align-items:center;gap:10px;background:#fff;border:1px solid var(--line);border-radius:14px;padding:10px}
  .quest .tick{width:24px;height:24px;border-radius:50%;border:2px solid #cfe0ff;display:grid;place-items:center;cursor:pointer}
  .quest.done{opacity:.6}
  .quest.done .tick{background:linear-gradient(135deg,var(--mint),var(--sky)); color:#063; border-color:transparent}

  /* avatars/badges */
  .avatars{display:flex; gap:10px; align-items:center}
  .ava{width:36px;height:36px;border-radius:50%; background:#fff; border:2px solid var(--line); display:grid; place-items:center; font-size:18px}
  .badges{display:flex; gap:8px; flex-wrap:wrap}
  .badgeIcon{font-size:18px; display:inline-grid; place-items:center; width:32px; height:32px; border-radius:50%;
    background:#fff; border:1px solid var(--line)}

  /* bottom nav */
  .nav{position:fixed;bottom:0;inset-inline:0;height:var(--bar);display:flex;justify-content:space-around;align-items:center;
    background:#fff;border-top:1px solid var(--line);z-index:20}
  .tab{flex:1;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;color:#6a7696;font-size:11px}
  .tab.active{color:#1a1d2b;font-weight:800}
  .ico{font-size:20px;line-height:1}

  /* fab */
  .fab{position:fixed;right:16px;bottom:calc(var(--bar)+16px);width:var(--fab);height:var(--fab);border-radius:50%;
    background:conic-gradient(from 0deg,var(--mint),var(--sky),var(--lilac));color:#042;border:none;font-size:30px;font-weight:900;box-shadow:0 14px 32px rgba(0,0,0,.18)}

  /* sheet */
  .backdrop{position:fixed;inset:0;display:none;background:rgba(0,0,0,.18);backdrop-filter:blur(6px);align-items:flex-end;z-index:30}
  .sheet{width:100%;border-top-left-radius:18px;border-top-right-radius:18px;background:#fff;border-top:1px solid var(--line);padding:14px 12px 18px}
  .show{display:flex}

  /* toast */
  .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(var(--bar)+var(--fab)+12px);background:#fff;border:1px solid var(--line);
    color:#173; padding:10px 14px;border-radius:999px;display:none;z-index:40;box-shadow:var(--shadow)}
  .toast.show{display:block}

  /* fun animations */
  @keyframes pop{0%{transform:scale(.8)}60%{transform:scale(1.06)}100%{transform:scale(1)}}
  .pop{animation:pop .25s ease}
</style>
</head>
<body>
  <!-- Top -->
  <div class="top">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>Us ‚Äî Journey</h1>
        <div class="muted">Playful ‚Ä¢ light mode</div>
      </div>
    </div>
    <div class="row avatars">
      <div class="ava" id="meAva">ü¶ä</div>
      <div class="ava" id="ptAva">üê£</div>
      <button class="btn" id="editNames">‚úèÔ∏è</button>
    </div>
  </div>

  <main class="wrap">
    <!-- Journey Map -->
    <section id="screen-journey">
      <div class="card">
        <div class="title">
          <strong>Journey</strong>
          <span class="pill" id="xpBadge">XP 0 ‚Ä¢ Streak 0üî•</span>
        </div>
        <div class="journey-wrap">
          <svg id="line" viewBox="0 0 400 300" preserveAspectRatio="none">
            <!-- playful squiggle path -->
            <path id="path" d="M20,270 C60,210 90,210 120,260 C150,310 210,310 240,250 C270,195 300,190 340,230"
                  fill="none" stroke="url(#grad)" stroke-width="10" stroke-linecap="round" stroke-opacity="0.3"/>
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#72e4c1"/><stop offset="100%" stop-color="#9fc2ff"/>
              </linearGradient>
            </defs>
          </svg>
          <div class="journey-bg"></div>
          <!-- nodes are positioned by JS -->
          <div id="nodes"></div>
        </div>
      </div>

      <div class="card">
        <div class="title">
          <strong>Micro-quests (today)</strong>
          <span class="chip">finish all = +4 XP</span>
        </div>
        <div class="row" id="quests"></div>
      </div>

      <div class="card">
        <div class="title"><strong>Activity</strong><span class="chip">üíö +1 ‚Ä¢ üß∏ +2 ‚Ä¢ ‚öñÔ∏è +3</span></div>
        <div id="feed"><div class="empty">No activity yet. Tap <b>Ôºã</b> to add.</div></div>
      </div>

      <div class="card">
        <div class="title"><strong>Badges</strong><span class="chip">collect & flex</span></div>
        <div class="badges" id="badges">
          <div class="badgeIcon" title="First step">ü•á</div>
          <div class="badgeIcon" title="3-day streak">üî•</div>
          <div class="badgeIcon" title="7 appreciations">üíö</div>
          <div class="badgeIcon" title="Calm debate">ü´ñ</div>
        </div>
      </div>
    </section>

    <!-- Debates -->
    <section id="screen-debates" style="display:none">
      <div class="card">
        <div class="title"><strong>Debate Arena</strong><span class="chip">fair & kind</span></div>
        <div class="row"><input id="debTitle" placeholder="Problem title (short)"/></div>
        <div class="row"><textarea id="debMine" placeholder="My view (any language)"></textarea></div>
        <div class="row"><textarea id="debPartner" placeholder="Partner‚Äôs view (any language)"></textarea></div>
        <div class="row">
          <select id="debLang">
            <option value="auto">Referee in partner‚Äôs language (auto UK/PT/EN)</option>
            <option value="uk">Ukrainian</option>
            <option value="pt">Portuguese</option>
            <option value="en">English</option>
          </select>
          <button class="btn" id="refereeBtn">Referee</button>
        </div>
        <div id="refereeCard" class="item" style="display:none">
          <div class="dot" style="background:var(--lilac)"></div>
          <div style="flex:1">
            <div id="refereeText"></div>
            <div class="meta" id="refereeMeta"></div>
          </div>
          <button class="btn" id="saveDebate" style="background:linear-gradient(135deg,var(--mint),var(--sky));color:#063">Post</button>
        </div>
      </div>

      <div class="card">
        <div class="title"><strong>Debate Board</strong><span class="chip">vote follow-through</span></div>
        <div id="debateList"><div class="empty">No debates yet.</div></div>
      </div>
    </section>

    <!-- Scores -->
    <section id="screen-scores" style="display:none">
      <div class="card">
        <div class="title"><strong>Leaderboard</strong><span class="chip">friendly only üòÑ</span></div>
        <div class="item"><div class="dot" style="background:var(--green)"></div><div style="flex:1"><strong id="meName">You</strong><div class="meta"><span id="meXP">0</span> XP</div></div></div>
        <div class="item" style="margin-top:8px"><div class="dot" style="background:var(--sky)"></div><div style="flex:1"><strong id="ptName">Partner</strong><div class="meta"><span id="ptXP">0</span> XP</div></div></div>
      </div>
      <div class="card">
        <div class="title"><strong>Streak & Goals</strong><span class="chip">unlock levels</span></div>
        <div class="item"><div class="dot" style="background:var(--gold)"></div><div>Streak <b id="streakN">0</b> days ‚Ä¢ Next: keep a 3-day streak for <b>Level 2</b></div></div>
      </div>
    </section>
  </main>

  <!-- bottom nav -->
  <nav class="nav">
    <button class="tab active" data-scr="journey"><div class="ico">üó∫Ô∏è</div>Journey</button>
    <button class="tab" data-scr="debates"><div class="ico">‚öñÔ∏è</div>Debates</button>
    <button class="tab" data-scr="scores"><div class="ico">üèÜ</div>Scores</button>
  </nav>

  <!-- fab -->
  <button class="fab" id="fab" aria-label="Add">Ôºã</button>

  <!-- add sheet -->
  <div class="backdrop" id="sheet">
    <div class="sheet">
      <div class="row" style="justify-content:space-between"><strong>Add</strong><button class="btn" id="closeSheet">Close</button></div>
      <div class="row" style="margin-top:10px">
        <button class="btn" id="addApp">üíö Appreciation</button>
        <button class="btn" id="addWish">üß∏ Wish</button>
        <button class="btn" id="addDeb">‚öñÔ∏è Debate</button>
      </div>
      <div id="form" style="margin-top:10px"></div>
      <div class="row" style="margin-top:10px"><button class="btn" id="saveBtn" style="display:none;background:linear-gradient(135deg,var(--mint),var(--sky));color:#063">Save</button></div>
    </div>
  </div>

  <div class="toast" id="toast">Saved</div>

  <!-- confetti canvas -->
  <canvas id="fx" style="position:fixed;inset:0;pointer-events:none;z-index:50"></canvas>

<script>
/* ===== tiny store (demo) ===== */
const store = {
  xp: { me:0, partner:0 }, streak:0,
  steps: 10,
  feed: [],
  debates: [],
  quests: [
    {id:'q1', text:'Send 1 concrete appreciation', done:false},
    {id:'q2', text:'Plan a 10-min walk', done:false},
    {id:'q3', text:'Use ‚ÄúI feel‚Ä¶ when‚Ä¶ I‚Äôd love if‚Ä¶‚Äù once', done:false},
  ]
};

/* ===== helpers ===== */
const $ = id=>document.getElementById(id);
const toast = (m='Saved')=>{ const t=$('toast'); t.textContent=m; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1200); };
function timeStr(d){ return new Intl.DateTimeFormat(undefined,{hour:'2-digit',minute:'2-digit'}).format(d); }

/* ===== confetti (cute + tiny) ===== */
const ctx = $('fx').getContext('2d');
function resizeFx(){ $('fx').width=innerWidth; $('fx').height=innerHeight }
addEventListener('resize', resizeFx); resizeFx();
let confs=[];
function confetti(x=innerWidth/2,y=innerHeight/2,count=80){
  for(let i=0;i<count;i++){
    confs.push({x,y, vx:(Math.random()-0.5)*6, vy:(Math.random()*-4-2), g:0.12, s:Math.random()*4+2, c:`hsl(${Math.random()*360},80%,60%)`, life:Math.random()*60+30});
  }
}
function loop(){
  ctx.clearRect(0,0,innerWidth,innerHeight);
  confs = confs.filter(p=>p.life>0);
  confs.forEach(p=>{
    p.life--; p.x+=p.vx; p.y+=p.vy; p.vy+=p.g;
    ctx.fillStyle=p.c; ctx.fillRect(p.x, p.y, p.s, p.s);
  });
  requestAnimationFrame(loop);
}
loop();

/* ===== journey path nodes ===== */
function placeNodes(){
  const svg = document.getElementById('line');
  const path = document.getElementById('path');
  const nodesHost = document.getElementById('nodes');
  nodesHost.innerHTML='';

  const len = path.getTotalLength();
  const steps = store.steps;
  for(let i=0;i<steps;i++){
    const p = path.getPointAtLength(len*(i/(steps-1)));
    const node = document.createElement('div');
    node.className='node '+(i===0?'current unlocked':'unlocked');
    node.style.left = (p.x-27)+'px';
    node.style.top = (p.y-27)+'px';
    node.innerHTML = `<div class="lvl">L${i+1}</div><div class="dot"></div>`;
    nodesHost.appendChild(node);
  }
}
placeNodes();

function updateNodes(){
  const nodes = [...document.querySelectorAll('.node')];
  const totalXP = store.xp.me + store.xp.partner;
  const perStep = 10; // unlock per 10 total XP
  nodes.forEach((n,idx)=>{
    const need = idx*perStep;
    n.classList.toggle('unlocked', totalXP >= need);
    n.classList.toggle('done', totalXP >= need+perStep);
    n.classList.toggle('current', totalXP >= need && totalXP < need+perStep);
  });
}

/* ===== quests ===== */
function renderQuests(){
  const box=$('quests'); box.innerHTML='';
  store.quests.forEach(q=>{
    const div=document.createElement('div');
    div.className='quest'+(q.done?' done':'');
    div.innerHTML = `<div class="tick">${q.done?'‚úîÔ∏è':''}</div><div style="flex:1">${q.text}</div>`;
    const tick=div.querySelector('.tick');
    tick.addEventListener('click', ()=>{
      q.done=!q.done; div.classList.toggle('done', q.done);
      if(q.done){ addXP('me',2); addFeed('daily','Both','Completed a micro-quest'); confetti(innerWidth-80, innerHeight-120, 40); }
      renderBadges();
    });
    box.appendChild(div);
  });
}
renderQuests();

/* ===== feed ===== */
function addFeed(kind, who, text){
  store.feed.unshift({kind, who, text, when:new Date()});
  renderFeed();
}
function renderFeed(){
  const feed=$('feed');
  if(!store.feed.length){ feed.innerHTML='<div class="empty">No activity yet. Tap <b>Ôºã</b> to add.</div>'; return; }
  feed.innerHTML='';
  store.feed.forEach(it=>{
    const el=document.createElement('div');
    const tclass = it.kind==='appreciation'?'app': it.kind==='wish'?'wish':'sum';
    el.className='item type-'+tclass+' pop';
    el.innerHTML = `<div class="dot"></div><div style="flex:1"><div>${it.text}</div><div class="meta">‚Äî ${it.who} ‚Ä¢ ${timeStr(it.when)}</div></div>`;
    feed.appendChild(el);
  });
}

/* ===== XP / badges / streak ===== */
function addXP(who, amount){
  store.xp[who]+=amount;
  $('meXP').textContent=store.xp.me; $('ptXP').textContent=store.xp.partner;
  const total = store.xp.me + store.xp.partner;
  $('xpBadge').textContent = `XP ${total} ‚Ä¢ Streak ${store.streak}üî•`;
  updateNodes();
}
function renderBadges(){
  $('streakN').textContent = store.streak;
}

/* ===== debates ===== */
function guessLang(t){
  if(/[\u0400-\u04FF]/.test(t)) return 'uk';
  const pt=[' que ',' n√£o ',' voc√™ ',' pra ',' de ',' √© ',' ao ',' √† ',' meu ',' minha ',' seu ',' sua ',' com '];
  const L=' '+t.toLowerCase()+' '; return pt.some(w=>L.includes(w))?'pt':'en';
}
function summarizeLocal(title, mine, partner, target){
  const T={
    en:(t,m,p)=>`Referee (${t}): You both care. You: ‚Äú${m.slice(0,90)}‚Ä¶‚Äù. Partner: ‚Äú${p.slice(0,90)}‚Ä¶‚Äù. Next: one 48-hour test, then check in.`,
    pt:(t,m,p)=>`√Årbitro (${t}): Voc√™s se importam. Voc√™: ‚Äú${m.slice(0,90)}‚Ä¶‚Äù. Parceira(o): ‚Äú${p.slice(0,90)}‚Ä¶‚Äù. Pr√≥ximo: 1 teste de 48h, revisar depois.`,
    uk:(t,m,p)=>`–†–µ—Ñ–µ—Ä—ñ (${t}): –í–∞–º –æ–±–æ–º –≤–∞–∂–ª–∏–≤–æ. –í–∏: ¬´${m.slice(0,90)}‚Ä¶¬ª. –ü–∞—Ä—Ç–Ω–µ—Ä(–∫–∞): ¬´${p.slice(0,90)}‚Ä¶¬ª. –î–∞–ª—ñ: –æ–¥–∏–Ω —Ç–µ—Å—Ç –Ω–∞ 48 –≥–æ–¥ —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞.`
  }; return (T[target]||T.en)(title,mine,partner);
}
$('refereeBtn').addEventListener('click', ()=>{
  const title=$('debTitle').value.trim(), mine=$('debMine').value.trim(), partner=$('debPartner').value.trim();
  if(!title||!mine||!partner) return;
  const sel=$('debLang').value;
  const target = sel!=='auto' ? sel : (guessLang(partner)||'uk');
  const out = summarizeLocal(title, mine, partner, target);
  $('refereeText').textContent = out;
  $('refereeMeta').textContent = `‚Üí ${target.toUpperCase()} ‚Ä¢ fair & short`;
  $('refereeCard').style.display='flex';
});
$('saveDebate').addEventListener('click', ()=>{
  const title=$('debTitle').value.trim();
  const sum=$('refereeText').textContent.trim();
  if(!title||!sum) return;
  const id=Math.random().toString(36).slice(2,9);
  store.debates.unshift({id,title,summary:sum});
  $('debTitle').value=''; $('debMine').value=''; $('debPartner').value=''; $('refereeCard').style.display='none';
  renderDebates();
  addFeed('summary','Referee',`‚Äú${title}‚Äù ‚Üí plan posted`);
  addXP('me',1); addXP('partner',1);
  confetti(innerWidth/2, innerHeight/3, 90);
  toast('Debate posted');
});
function renderDebates(){
  const list=$('debateList'); if(!store.debates.length){ list.innerHTML='<div class="empty">No debates yet.</div>'; return; }
  list.innerHTML='';
  store.debates.forEach(d=>{
    const row=document.createElement('div'); row.className='item';
    row.innerHTML = `<div class="dot" style="background:${'var(--lilac)'}"></div>
      <div style="flex:1">
        <div><strong>${d.title}</strong></div>
        <div class="meta">${d.summary}</div>
        <div class="row" style="margin-top:8px">
          <button class="btn" data-who="me">‚úîÔ∏è I followed</button>
          <button class="btn" data-who="partner">‚úîÔ∏è Partner followed</button>
          <button class="btn" data-who="none">‚úñÔ∏è Skip</button>
        </div>
      </div>`;
    row.querySelectorAll('button').forEach(b=> b.addEventListener('click', ()=>{
      const who=b.dataset.who;
      if(who==='me'){ addXP('me',3); addFeed('summary','Me',`Followed debate: ${d.title}`); }
      else if(who==='partner'){ addXP('partner',3); addFeed('summary','Partner',`Followed debate: ${d.title}`); }
      row.remove();
      confetti(innerWidth-80, innerHeight-120, 50);
    }));
    list.appendChild(row);
  });
}

/* ===== add sheet ===== */
const sheet=$('sheet'), form=$('form');
$('fab').addEventListener('click', ()=>{ sheet.classList.add('show'); form.innerHTML=''; $('saveBtn').style.display='none'; });
$('closeSheet').addEventListener('click', ()=> sheet.classList.remove('show'));
$('addApp').addEventListener('click', ()=>{
  form.innerHTML = `<textarea id="t" placeholder="üíö 1‚Äì2 sentences‚Ä¶"></textarea>`; $('saveBtn').style.display='inline-block';
  $('saveBtn').onclick=()=>{ const v=$('t').value.trim(); if(!v) return; addFeed('appreciation','Me',v); addXP('me',1); sheet.classList.remove('show'); toast('Added'); confetti(innerWidth-60, innerHeight-140, 40); };
});
$('addWish').addEventListener('click', ()=>{
  form.innerHTML = `<textarea id="t" placeholder="üß∏ I feel‚Ä¶ when‚Ä¶ I‚Äôd love if‚Ä¶"></textarea>`; $('saveBtn').style.display='inline-block';
  $('saveBtn').onclick=()=>{ const v=$('t').value.trim(); if(!v) return; addFeed('wish','Me',v); addXP('me',2); sheet.classList.remove('show'); toast('Added'); confetti(80, innerHeight-120, 50); };
});
$('addDeb').addEventListener('click', ()=>{
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
  document.querySelector('[data-scr="debates"]').classList.add('active');
  ['journey','scores'].forEach(k=> $('screen-'+k).style.display='none');
  $('screen-debates').style.display='block';
  sheet.classList.remove('show');
});

/* ===== names / avatars (simple) ===== */
$('editNames').addEventListener('click', ()=>{
  const me = prompt('Your name', $('meName').textContent || 'You') || 'You';
  const pt = prompt('Partner name', $('ptName').textContent || 'Partner') || 'Partner';
  $('meName').textContent = me; $('ptName').textContent = pt;
  const meEmoji = prompt('Pick your avatar emoji (e.g., ü¶ä, üêº, üê∏)', 'ü¶ä') || 'ü¶ä';
  const ptEmoji = prompt('Partner avatar emoji', 'üê£') || 'üê£';
  $('meAva').textContent = meEmoji; $('ptAva').textContent = ptEmoji;
  toast('Saved');
});

/* ===== nav ===== */
document.querySelectorAll('.tab').forEach(b=> b.addEventListener('click', ()=>{
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active')); b.classList.add('active');
  const scr=b.dataset.scr;
  ['journey','debates','scores'].forEach(k=> $('screen-'+k).style.display = (k===scr)?'block':'none');
}));

/* ===== start ===== */
function start(){
  placeNodes(); updateNodes(); renderFeed(); renderDebates();
  // sweet entry confetti on first time
  setTimeout(()=> confetti(innerWidth/2, innerHeight/3, 80), 500);
}
start();
</script>
</body>
</html>
